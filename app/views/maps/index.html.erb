<h1>あそべ～るトップページ</h1>

<style type="text/css">
  #map {
    height: 400px;
    margin-left: auto;
    margin-right: auto;
    text-align: left;
    width: 80%;
  }
</style>
<table>
  <thead>
    <tr>
      <!-- <th>ID</th> -->
      <th>地点名</th>
      <th>緯度</th>
      <th>経度</th>
      <!-- <th colspan="3"></th> -->
    </tr>
  </thead>

  <tbody>
    <% @maps.each do |map| %>
      <tr>
        <!-- <td><%= map.id %></td> -->
        <td><%= map.map_name %></td>
        <td><%= map.map_lat %></td>
        <td><%= map.map_lng %></td>
        <!-- <td><%= link_to 'Show', map %></td>
        <td><%= link_to 'Edit', edit_map_path(map) %></td>
        <td><%= link_to 'Destroy', map, method: :delete, data: { confirm: 'Are you sure?' } %></td> -->
      </tr>
    <% end %>
  </tbody>
</table>

<%= form_tag maps_path, :method => 'get' do %>
  <p>
    <%= text_field_tag :search, params[:search] %>
    <%= submit_tag "検索", :word => nil %>
  </p>
<% end %>
<%= link_to '地点登録', new_map_path, :class=>"btn btn-primary" %>

<div id="map"></div>
<script type="text/javascript">
    handler = Gmaps.build('Google');
    handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
      markers = handler.addMarkers(<%=raw @hash.to_json %>);
      handler.bounds.extendWith(markers);
      handler.fitMapToBounds();
    });
</script>
<script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBJfuH3GcpFYapsQGKpWvoiZJ2oqF8ud44&callback=initMap">
    </script>
</html>
